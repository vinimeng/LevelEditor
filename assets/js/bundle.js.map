{"version":3,"sources":["webpack://level-editor/./assets/ts/game/element.ts","webpack://level-editor/./assets/ts/game/game.ts","webpack://level-editor/./assets/ts/graphics/graphics.ts","webpack://level-editor/./assets/ts/graphics/spritesheet.cheatsheet.ts","webpack://level-editor/./assets/ts/main.ts","webpack://level-editor/./assets/ts/misc/constants.ts","webpack://level-editor/./assets/ts/misc/html.ts","webpack://level-editor/webpack/bootstrap","webpack://level-editor/webpack/startup"],"names":["Object","defineProperty","exports","value","default","x","y","width","height","id","type","sprite","index","this","drawWithHalfOpacity","context2D","globalAlpha","drawImage","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__importDefault","mod","__esModule","graphics_1","constants_1","html_1","element_1","Game","mapWidth","mapHeight","savedData","window","localStorage","setItem","String","elements","Array","graphics","isRunning","draggedCanvasElement","mouseDown","appDiv","document","getElementById","divCanvas","canvas","getContext","btnSaveMap","scale","determineScale","html","loadAssets","createElements","loadSavedData","initializeEvents","adjustCanvas","drawBackground","run","i","length","tick","render","self","frames","last","requestAnimationFrame","loop","now","spanFPS","style","display","innerText","GAME_WIDTH","GAME_HEIGHT","imageSmoothingEnabled","fillStyle","fillRect","grid","divWidth","offsetWidth","divHeight","offsetHeight","finalScale","Math","floor","addEventListener","preventDefault","dropEventHandler","mouseDownEventHandler","mouseMoveEventHandler","mouseUpEventHandler","contextMenuEventHandler","saveMap","setInterval","JSON","stringify","loadGraphics","sprtIndex","Number","dragged","dataset","sprtArray","array","scrollTop","parentElement","round","offsetX","dragEvent","clientX","offsetLeft","offsetY","clientY","offsetTop","nameW","wall","name","sprtW","push","nameF","sprtF","nameI","interactable","sprtI","nameIA","interactableAnim","sprtIA","nameD","doors","sprtD","nameWe","weapon","sprtWe","nameP","potion","sprtP","nameE","enemy","sprtE","namePl","player","sprtPl","mouseX","mouseY","element","outerX","outerY","diffX","diffY","splice","json","parse","parseInt","wallAnim","clear","mapJSON","blob","Blob","url","URL","createObjectURL","a","createElement","setAttribute","click","spritesheet_cheatsheet_1","Graphics","spritesheet","setSpritesheet","createGridImage","cutSprite","CHEATSHEET","spriteName","spriteCoord","wall_anim","interactable_anim","onload","onerror","src","SPRITESHEET","img","size","TILE_SIZE","svg","createImageBitmap","game_1","_a","_b","_c","_d","getItem","chooseResolution","unsavedData","btnCredits","main","inputWidth","inputHeight","inputJSON","files","fr","FileReader","target","mapJSONString","readAsText","GameState","modalCredits","btnToggleFPS","divBreakWallBefore","className","spanWall","innerHTML","divBreakWallAfter","append","forEach","appendElements","divBreakWallAnimBefore","spanWallAnim","divBreakWallAnimAfter","divBreakFloorBefore","spanFloor","divBreakFloorAfter","divBreakInteractableBefore","spanInteractable","divBreakInteractableAfter","divBreakInteractableAnimBefore","spanInteractableAnim","divBreakInteractableAnimAfter","divBreakDoorsBefore","spanDoors","divBreakDoorsAfter","divBreakWeaponBefore","spanWeapon","divBreakWeaponAfter","divBreakPotionBefore","spanPotion","divBreakPotionAfter","divBreakEnemyBefore","spanEnemy","divBreakEnemyAfter","divBreakPlayerBefore","spanPlayer","divBreakPlayerAfter","draggable","margin","title","ctx","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","module","__webpack_modules__","call"],"mappings":"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","file":"bundle.js","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Element {\r\n    constructor(x, y, width, height, id, type, sprite, index) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.id = id;\r\n        this.type = type;\r\n        this.sprite = sprite;\r\n        this.index = index;\r\n        this.drawWithHalfOpacity = false;\r\n    }\r\n    tick() {\r\n    }\r\n    render(context2D) {\r\n        if (this.drawWithHalfOpacity) {\r\n            context2D.globalAlpha = 0.5;\r\n            context2D.drawImage(this.sprite, this.x, this.y, this.width, this.height);\r\n            context2D.globalAlpha = 1;\r\n        }\r\n        else {\r\n            context2D.drawImage(this.sprite, this.x, this.y, this.width, this.height);\r\n        }\r\n    }\r\n}\r\nexports.default = Element;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst graphics_1 = __importDefault(require(\"../graphics/graphics\"));\r\nconst constants_1 = require(\"../misc/constants\");\r\nconst html_1 = __importDefault(require(\"../misc/html\"));\r\nconst element_1 = __importDefault(require(\"./element\"));\r\nclass Game {\r\n    constructor(mapWidth = 0, mapHeight = 0, savedData = null) {\r\n        this.mapWidth = mapWidth;\r\n        this.mapHeight = mapHeight;\r\n        window.localStorage.setItem('mapWidth', String(this.mapWidth));\r\n        window.localStorage.setItem('mapHeight', String(this.mapHeight));\r\n        this.elements = new Array();\r\n        this.graphics = new graphics_1.default();\r\n        this.savedData = savedData;\r\n        this.isRunning = false;\r\n        this.draggedCanvasElement = null;\r\n        this.mouseDown = null;\r\n        this.appDiv = document.getElementById('app');\r\n        this.divCanvas = document.getElementById('divCanvas');\r\n        this.canvas = document.getElementById('canvas');\r\n        this.context2D = this.canvas.getContext('2d');\r\n        this.btnSaveMap = document.getElementById('btnSaveMap');\r\n        this.scale = this.determineScale();\r\n        this.html = new html_1.default(this.scale);\r\n    }\r\n    main() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.loadAssets();\r\n            this.html.createElements();\r\n            if (this.savedData) {\r\n                this.loadSavedData(this.savedData);\r\n            }\r\n            this.initializeEvents();\r\n            this.adjustCanvas();\r\n            this.drawBackground();\r\n            this.run();\r\n        });\r\n    }\r\n    tick() {\r\n        for (let i = 0; i < this.elements.length; i++) {\r\n            this.elements[i].tick();\r\n        }\r\n    }\r\n    render() {\r\n        this.drawBackground();\r\n        for (let i = 0; i < this.elements.length; i++) {\r\n            this.elements[i].render(this.context2D);\r\n        }\r\n    }\r\n    run() {\r\n        let self = this;\r\n        let frames = 0;\r\n        let last = 0;\r\n        function loop(now) {\r\n            self.tick();\r\n            self.render();\r\n            if (self.html.spanFPS.style.display === 'block') {\r\n                frames++;\r\n                if (now - last > 1000) {\r\n                    self.html.spanFPS.innerText = `${frames}fps`;\r\n                    frames = 0;\r\n                    last = now;\r\n                }\r\n            }\r\n            if (self.isRunning) {\r\n                window.requestAnimationFrame(loop);\r\n            }\r\n        }\r\n        this.isRunning = true;\r\n        window.requestAnimationFrame(loop);\r\n    }\r\n    adjustCanvas() {\r\n        this.divCanvas.style.width = (constants_1.GAME_WIDTH * this.scale) + 'px';\r\n        this.divCanvas.style.height = (constants_1.GAME_HEIGHT * this.scale) + 'px';\r\n        this.canvas.width = this.mapWidth * this.scale;\r\n        this.canvas.height = this.mapHeight * this.scale;\r\n        this.context2D.scale(this.scale, this.scale);\r\n        this.context2D.imageSmoothingEnabled = false;\r\n    }\r\n    drawBackground() {\r\n        this.context2D.fillStyle = 'black';\r\n        this.context2D.fillRect(0, 0, this.mapWidth, this.mapHeight);\r\n        this.context2D.drawImage(graphics_1.default.grid, 0, 0, this.mapWidth, this.mapHeight);\r\n    }\r\n    determineScale() {\r\n        const divWidth = this.appDiv.offsetWidth;\r\n        const divHeight = this.appDiv.offsetHeight;\r\n        let finalScale = divWidth / constants_1.GAME_WIDTH;\r\n        if (finalScale >= 1) {\r\n            finalScale = Math.floor(finalScale);\r\n            if (constants_1.GAME_WIDTH * finalScale > divWidth ||\r\n                constants_1.GAME_HEIGHT * finalScale > divHeight) {\r\n                finalScale = finalScale - 1;\r\n            }\r\n        }\r\n        if (finalScale < 1 && finalScale >= 0.75) {\r\n            finalScale = 0.75;\r\n        }\r\n        else if (finalScale < 0.75 && finalScale >= 0.5) {\r\n            finalScale = 0.5;\r\n        }\r\n        else if (finalScale < 0.5) {\r\n            finalScale = 0.25;\r\n        }\r\n        return finalScale;\r\n    }\r\n    initializeEvents() {\r\n        window.addEventListener('resize', () => {\r\n            this.scale = this.determineScale();\r\n            this.adjustCanvas();\r\n        });\r\n        this.canvas.addEventListener('dragover', (e) => {\r\n            e.preventDefault();\r\n            return false;\r\n        });\r\n        this.canvas.addEventListener('drop', (e) => {\r\n            this.dropEventHandler(e);\r\n        });\r\n        this.canvas.addEventListener('mousedown', (e) => {\r\n            this.mouseDownEventHandler(e);\r\n        });\r\n        this.canvas.addEventListener('mousemove', (e) => {\r\n            this.mouseMoveEventHandler(e);\r\n        });\r\n        this.canvas.addEventListener('mouseup', (e) => {\r\n            this.mouseUpEventHandler(e);\r\n        });\r\n        this.canvas.addEventListener('contextmenu', (e) => {\r\n            this.contextMenuEventHandler(e);\r\n        });\r\n        this.btnSaveMap.addEventListener('click', () => {\r\n            this.saveMap();\r\n        });\r\n        window.setInterval(() => {\r\n            window.localStorage.setItem('elements', JSON.stringify(this.elements));\r\n        }, 30000);\r\n    }\r\n    loadAssets() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.graphics.loadGraphics(this.scale);\r\n        });\r\n    }\r\n    dropEventHandler(e) {\r\n        const sprtIndex = Number(Game.dragged.dataset.index);\r\n        const sprtArray = String(Game.dragged.dataset.array);\r\n        const scrollTop = Game.dragged.parentElement ? Game.dragged.parentElement.scrollTop : 0;\r\n        const x = Math.round((e.offsetX - Game.dragEvent.clientX + Game.dragged.offsetLeft) / this.scale);\r\n        const y = Math.round((e.offsetY - Game.dragEvent.clientY + Game.dragged.offsetTop - scrollTop) / this.scale);\r\n        switch (sprtArray) {\r\n            case 'wall':\r\n                const nameW = graphics_1.default.wall[sprtIndex].name;\r\n                const sprtW = graphics_1.default.wall[sprtIndex].sprite;\r\n                this.elements.push(new element_1.default(x, y, sprtW.width, sprtW.height, nameW, sprtArray, sprtW, sprtIndex));\r\n                break;\r\n            case 'floor':\r\n                const nameF = graphics_1.default.floor[sprtIndex].name;\r\n                const sprtF = graphics_1.default.floor[sprtIndex].sprite;\r\n                this.elements.push(new element_1.default(x, y, sprtF.width, sprtF.height, nameF, sprtArray, sprtF, sprtIndex));\r\n                break;\r\n            case 'interactable':\r\n                const nameI = graphics_1.default.interactable[sprtIndex].name;\r\n                const sprtI = graphics_1.default.interactable[sprtIndex].sprite;\r\n                this.elements.push(new element_1.default(x, y, sprtI.width, sprtI.height, nameI, sprtArray, sprtI, sprtIndex));\r\n                break;\r\n            case 'interactableAnim':\r\n                const nameIA = graphics_1.default.interactableAnim[sprtIndex].name;\r\n                const sprtIA = graphics_1.default.interactableAnim[sprtIndex].sprite;\r\n                this.elements.push(new element_1.default(x, y, sprtIA.width, sprtIA.height, nameIA, sprtArray, sprtIA, sprtIndex));\r\n                break;\r\n            case 'doors':\r\n                const nameD = graphics_1.default.doors[sprtIndex].name;\r\n                const sprtD = graphics_1.default.doors[sprtIndex].sprite;\r\n                this.elements.push(new element_1.default(x, y, sprtD.width, sprtD.height, nameD, sprtArray, sprtD, sprtIndex));\r\n                break;\r\n            case 'weapon':\r\n                const nameWe = graphics_1.default.weapon[sprtIndex].name;\r\n                const sprtWe = graphics_1.default.weapon[sprtIndex].sprite;\r\n                this.elements.push(new element_1.default(x, y, sprtWe.width, sprtWe.height, nameWe, sprtArray, sprtWe, sprtIndex));\r\n                break;\r\n            case 'potion':\r\n                const nameP = graphics_1.default.potion[sprtIndex].name;\r\n                const sprtP = graphics_1.default.potion[sprtIndex].sprite;\r\n                this.elements.push(new element_1.default(x, y, sprtP.width, sprtP.height, nameP, sprtArray, sprtP, sprtIndex));\r\n                break;\r\n            case 'enemy':\r\n                const nameE = graphics_1.default.enemy[sprtIndex].name;\r\n                const sprtE = graphics_1.default.enemy[sprtIndex].sprite;\r\n                this.elements.push(new element_1.default(x, y, sprtE.width, sprtE.height, nameE, sprtArray, sprtE, sprtIndex));\r\n                break;\r\n            case 'player':\r\n                const namePl = graphics_1.default.player.name;\r\n                const sprtPl = graphics_1.default.player.sprite;\r\n                this.elements.push(new element_1.default(x, y, sprtPl.width, sprtPl.height, namePl, sprtArray, sprtPl, sprtIndex));\r\n                break;\r\n        }\r\n    }\r\n    mouseDownEventHandler(e) {\r\n        const mouseX = e.offsetX / this.scale;\r\n        const mouseY = e.offsetY / this.scale;\r\n        for (let i = this.elements.length - 1; i >= 0; i--) {\r\n            const element = this.elements[i];\r\n            const x = element.x;\r\n            const y = element.y;\r\n            const outerX = element.x + element.width;\r\n            const outerY = element.y + element.height;\r\n            if ((mouseX >= x && mouseX <= outerX) &&\r\n                (mouseY >= y && mouseY <= outerY)) {\r\n                this.draggedCanvasElement = element;\r\n                this.mouseDown = { diffX: x - mouseX, diffY: y - mouseY };\r\n                element.drawWithHalfOpacity = true;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    mouseMoveEventHandler(e) {\r\n        if (this.mouseDown) {\r\n            const mouseX = (e.offsetX / this.scale) + this.mouseDown.diffX;\r\n            const mouseY = (e.offsetY / this.scale) + this.mouseDown.diffY;\r\n            if (this.draggedCanvasElement) {\r\n                this.draggedCanvasElement.x = mouseX;\r\n                this.draggedCanvasElement.y = mouseY;\r\n            }\r\n        }\r\n    }\r\n    mouseUpEventHandler(e) {\r\n        if (this.mouseDown) {\r\n            const mouseX = (e.offsetX / this.scale) + this.mouseDown.diffX;\r\n            const mouseY = (e.offsetY / this.scale) + this.mouseDown.diffY;\r\n            if (this.draggedCanvasElement) {\r\n                this.draggedCanvasElement.x = mouseX;\r\n                this.draggedCanvasElement.y = mouseY;\r\n                this.draggedCanvasElement.drawWithHalfOpacity = false;\r\n                this.mouseDown = null;\r\n                this.draggedCanvasElement = null;\r\n            }\r\n        }\r\n    }\r\n    contextMenuEventHandler(e) {\r\n        e.preventDefault();\r\n        const mouseX = e.offsetX / this.scale;\r\n        const mouseY = e.offsetY / this.scale;\r\n        for (let i = this.elements.length - 1; i >= 0; i--) {\r\n            const element = this.elements[i];\r\n            const outerX = element.x + element.width;\r\n            const outerY = element.y + element.height;\r\n            if ((mouseX >= element.x && mouseX <= outerX) &&\r\n                (mouseY >= element.y && mouseY <= outerY)) {\r\n                this.elements.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    loadSavedData(savedData) {\r\n        let json = JSON.parse(savedData);\r\n        for (let element in json) {\r\n            switch (String(json[element].type)) {\r\n                case 'wall':\r\n                    this.elements.push(new element_1.default(parseInt(json[element].x), parseInt(json[element].y), parseInt(json[element].width), parseInt(json[element].height), String(json[element].id), String(json[element].type), graphics_1.default.wall[parseInt(json[element].index)].sprite, parseInt(json[element].index)));\r\n                    break;\r\n                case 'wallAnim':\r\n                    this.elements.push(new element_1.default(parseInt(json[element].x), parseInt(json[element].y), parseInt(json[element].width), parseInt(json[element].height), String(json[element].id), String(json[element].type), graphics_1.default.wallAnim[parseInt(json[element].index)].sprite, parseInt(json[element].index)));\r\n                    break;\r\n                case 'floor':\r\n                    this.elements.push(new element_1.default(parseInt(json[element].x), parseInt(json[element].y), parseInt(json[element].width), parseInt(json[element].height), String(json[element].id), String(json[element].type), graphics_1.default.floor[parseInt(json[element].index)].sprite, parseInt(json[element].index)));\r\n                    break;\r\n                case 'interactable':\r\n                    this.elements.push(new element_1.default(parseInt(json[element].x), parseInt(json[element].y), parseInt(json[element].width), parseInt(json[element].height), String(json[element].id), String(json[element].type), graphics_1.default.interactable[parseInt(json[element].index)].sprite, parseInt(json[element].index)));\r\n                    break;\r\n                case 'interactableAnim':\r\n                    this.elements.push(new element_1.default(parseInt(json[element].x), parseInt(json[element].y), parseInt(json[element].width), parseInt(json[element].height), String(json[element].id), String(json[element].type), graphics_1.default.interactableAnim[parseInt(json[element].index)].sprite, parseInt(json[element].index)));\r\n                    break;\r\n                case 'doors':\r\n                    this.elements.push(new element_1.default(parseInt(json[element].x), parseInt(json[element].y), parseInt(json[element].width), parseInt(json[element].height), String(json[element].id), String(json[element].type), graphics_1.default.doors[parseInt(json[element].index)].sprite, parseInt(json[element].index)));\r\n                    break;\r\n                case 'weapon':\r\n                    this.elements.push(new element_1.default(parseInt(json[element].x), parseInt(json[element].y), parseInt(json[element].width), parseInt(json[element].height), String(json[element].id), String(json[element].type), graphics_1.default.weapon[parseInt(json[element].index)].sprite, parseInt(json[element].index)));\r\n                    break;\r\n                case 'potion':\r\n                    this.elements.push(new element_1.default(parseInt(json[element].x), parseInt(json[element].y), parseInt(json[element].width), parseInt(json[element].height), String(json[element].id), String(json[element].type), graphics_1.default.potion[parseInt(json[element].index)].sprite, parseInt(json[element].index)));\r\n                    break;\r\n                case 'enemy':\r\n                    this.elements.push(new element_1.default(parseInt(json[element].x), parseInt(json[element].y), parseInt(json[element].width), parseInt(json[element].height), String(json[element].id), String(json[element].type), graphics_1.default.enemy[parseInt(json[element].index)].sprite, parseInt(json[element].index)));\r\n                    break;\r\n                case 'player':\r\n                    this.elements.push(new element_1.default(parseInt(json[element].x), parseInt(json[element].y), parseInt(json[element].width), parseInt(json[element].height), String(json[element].id), String(json[element].type), graphics_1.default.player.sprite, parseInt(json[element].index)));\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    saveMap() {\r\n        window.localStorage.clear();\r\n        const mapJSON = {\r\n            'width': this.mapWidth,\r\n            'height': this.mapHeight,\r\n            'elements': this.elements\r\n        };\r\n        const blob = new Blob([JSON.stringify(mapJSON)], { type: 'application/json' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.setAttribute('href', url);\r\n        a.setAttribute('download', 'map.json');\r\n        a.click();\r\n    }\r\n}\r\nexports.default = Game;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst constants_1 = require(\"../misc/constants\");\r\nconst spritesheet_cheatsheet_1 = require(\"./spritesheet.cheatsheet\");\r\nclass Graphics {\r\n    loadGraphics(scale) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const spritesheet = yield this.setSpritesheet();\r\n            Graphics.grid = yield this.createGridImage(scale);\r\n            let sprite = yield this.cutSprite(spritesheet, spritesheet_cheatsheet_1.CHEATSHEET.player[0], spritesheet_cheatsheet_1.CHEATSHEET.player[1], spritesheet_cheatsheet_1.CHEATSHEET.player[2], spritesheet_cheatsheet_1.CHEATSHEET.player[3]);\r\n            Graphics.player = {\r\n                name: 'player',\r\n                sprite: sprite\r\n            };\r\n            for (const spriteName in spritesheet_cheatsheet_1.CHEATSHEET.wall) {\r\n                const spriteCoord = spritesheet_cheatsheet_1.CHEATSHEET.wall[spriteName];\r\n                const sprt = yield this.cutSprite(spritesheet, spriteCoord[0], spriteCoord[1], spriteCoord[2], spriteCoord[3]);\r\n                const wall = {\r\n                    name: spriteName,\r\n                    sprite: sprt\r\n                };\r\n                Graphics.wall.push(wall);\r\n            }\r\n            for (const spriteName in spritesheet_cheatsheet_1.CHEATSHEET.wall_anim) {\r\n                const spriteCoord = spritesheet_cheatsheet_1.CHEATSHEET.wall_anim[spriteName];\r\n                const sprt = yield this.cutSprite(spritesheet, spriteCoord[0], spriteCoord[1], spriteCoord[2], spriteCoord[3]);\r\n                const wall = {\r\n                    name: spriteName,\r\n                    sprite: sprt\r\n                };\r\n                Graphics.wallAnim.push(wall);\r\n            }\r\n            for (const spriteName in spritesheet_cheatsheet_1.CHEATSHEET.floor) {\r\n                const spriteCoord = spritesheet_cheatsheet_1.CHEATSHEET.floor[spriteName];\r\n                const sprt = yield this.cutSprite(spritesheet, spriteCoord[0], spriteCoord[1], spriteCoord[2], spriteCoord[3]);\r\n                const floor = {\r\n                    name: spriteName,\r\n                    sprite: sprt\r\n                };\r\n                Graphics.floor.push(floor);\r\n            }\r\n            for (const spriteName in spritesheet_cheatsheet_1.CHEATSHEET.interactable) {\r\n                const spriteCoord = spritesheet_cheatsheet_1.CHEATSHEET.interactable[spriteName];\r\n                const sprt = yield this.cutSprite(spritesheet, spriteCoord[0], spriteCoord[1], spriteCoord[2], spriteCoord[3]);\r\n                const interactable = {\r\n                    name: spriteName,\r\n                    sprite: sprt\r\n                };\r\n                Graphics.interactable.push(interactable);\r\n            }\r\n            for (const spriteName in spritesheet_cheatsheet_1.CHEATSHEET.interactable_anim) {\r\n                const spriteCoord = spritesheet_cheatsheet_1.CHEATSHEET.interactable_anim[spriteName];\r\n                const sprt = yield this.cutSprite(spritesheet, spriteCoord[0], spriteCoord[1], spriteCoord[2], spriteCoord[3]);\r\n                const interactableAnim = {\r\n                    name: spriteName,\r\n                    sprite: sprt\r\n                };\r\n                Graphics.interactableAnim.push(interactableAnim);\r\n            }\r\n            for (const spriteName in spritesheet_cheatsheet_1.CHEATSHEET.doors) {\r\n                const spriteCoord = spritesheet_cheatsheet_1.CHEATSHEET.doors[spriteName];\r\n                const sprt = yield this.cutSprite(spritesheet, spriteCoord[0], spriteCoord[1], spriteCoord[2], spriteCoord[3]);\r\n                const doors = {\r\n                    name: spriteName,\r\n                    sprite: sprt\r\n                };\r\n                Graphics.doors.push(doors);\r\n            }\r\n            for (const spriteName in spritesheet_cheatsheet_1.CHEATSHEET.weapon) {\r\n                const spriteCoord = spritesheet_cheatsheet_1.CHEATSHEET.weapon[spriteName];\r\n                const sprt = yield this.cutSprite(spritesheet, spriteCoord[0], spriteCoord[1], spriteCoord[2], spriteCoord[3]);\r\n                const weapon = {\r\n                    name: spriteName,\r\n                    sprite: sprt\r\n                };\r\n                Graphics.weapon.push(weapon);\r\n            }\r\n            for (const spriteName in spritesheet_cheatsheet_1.CHEATSHEET.potion) {\r\n                const spriteCoord = spritesheet_cheatsheet_1.CHEATSHEET.potion[spriteName];\r\n                const sprt = yield this.cutSprite(spritesheet, spriteCoord[0], spriteCoord[1], spriteCoord[2], spriteCoord[3]);\r\n                const potion = {\r\n                    name: spriteName,\r\n                    sprite: sprt\r\n                };\r\n                Graphics.potion.push(potion);\r\n            }\r\n            for (const spriteName in spritesheet_cheatsheet_1.CHEATSHEET.enemy) {\r\n                const spriteCoord = spritesheet_cheatsheet_1.CHEATSHEET.enemy[spriteName];\r\n                const sprt = yield this.cutSprite(spritesheet, spriteCoord[0], spriteCoord[1], spriteCoord[2], spriteCoord[3]);\r\n                const enemy = {\r\n                    name: spriteName,\r\n                    sprite: sprt\r\n                };\r\n                Graphics.enemy.push(enemy);\r\n            }\r\n        });\r\n    }\r\n    setSpritesheet() {\r\n        const spritesheet = document.createElement('img');\r\n        return new Promise((resolve, reject) => {\r\n            spritesheet.onload = () => resolve(spritesheet);\r\n            spritesheet.onerror = reject;\r\n            spritesheet.src = constants_1.SPRITESHEET;\r\n        });\r\n    }\r\n    createGridImage(scale) {\r\n        const img = document.createElement('img');\r\n        const size = constants_1.TILE_SIZE * scale;\r\n        const color = 'rgba(187, 128, 130, 0.4)';\r\n        const svg = new Blob([`\r\n            <svg width=\"100%\" height=\"100%\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <defs>\r\n                    <pattern id=\"grid\" width=\"${size}\" height=\"${size}\" patternUnits=\"userSpaceOnUse\">\r\n                        <path d=\"M ${size} 0 L 0 0 0 ${size}\" fill=\"none\" stroke=\"${color}\" stroke-width=\"${scale}\" />\r\n                    </pattern>\r\n                </defs>\r\n                <rect width=\"100%\" height=\"100%\" fill=\"url(#grid)\"/>\r\n            </svg>\r\n        `], { type: 'image/svg+xml;charset=utf-8' });\r\n        const url = window.URL.createObjectURL(svg);\r\n        return new Promise((resolve, reject) => {\r\n            img.onload = () => resolve(img);\r\n            img.onerror = reject;\r\n            img.src = url;\r\n        });\r\n    }\r\n    cutSprite(spritesheet, x, y, width, height) {\r\n        return createImageBitmap(spritesheet, x, y, width, height);\r\n    }\r\n}\r\nexports.default = Graphics;\r\nGraphics.wall = new Array();\r\nGraphics.wallAnim = new Array();\r\nGraphics.floor = new Array();\r\nGraphics.interactable = new Array();\r\nGraphics.interactableAnim = new Array();\r\nGraphics.doors = new Array();\r\nGraphics.weapon = new Array();\r\nGraphics.potion = new Array();\r\nGraphics.enemy = new Array();\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CHEATSHEET = void 0;\r\nexports.CHEATSHEET = {\r\n    'wall': {\r\n        'wall_top_left': [16, 0, 16, 16],\r\n        'wall_top_mid': [16, 0, 16, 16],\r\n        'wall_top_right': [16, 0, 16, 16],\r\n        'wall_left': [16, 16, 16, 16],\r\n        'wall_mid': [32, 16, 16, 16],\r\n        'wall_right': [48, 16, 16, 16],\r\n        'wall_fountain_top': [64, 0, 16, 16],\r\n        'wall_hole_1': [48, 32, 16, 16],\r\n        'wall_hole_2': [48, 48, 16, 16],\r\n        'wall_banner_red': [16, 32, 16, 16],\r\n        'wall_banner_blue': [32, 32, 16, 16],\r\n        'wall_banner_green': [16, 48, 16, 16],\r\n        'wall_banner_yellow': [32, 48, 16, 16],\r\n        'wall_column_top': [96, 80, 16, 16],\r\n        'wall_column_mid': [96, 96, 16, 16],\r\n        'wall_column_base': [96, 112, 16, 16],\r\n        'wall_goo': [64, 80, 16, 16],\r\n        'wall_side_top_left': [0, 112, 16, 16],\r\n        'wall_side_top_right': [16, 112, 16, 16],\r\n        'wall_side_mid_left': [0, 128, 16, 16],\r\n        'wall_side_mid_right': [16, 128, 16, 16],\r\n        'wall_side_front_left': [0, 144, 16, 16],\r\n        'wall_side_front_right': [16, 144, 16, 16],\r\n        'wall_corner_top_left': [32, 112, 16, 16],\r\n        'wall_corner_top_right': [48, 112, 16, 16],\r\n        'wall_corner_left': [32, 128, 16, 16],\r\n        'wall_corner_right': [48, 128, 16, 16],\r\n        'wall_corner_bottom_left': [32, 144, 16, 16],\r\n        'wall_corner_bottom_right': [48, 144, 16, 16],\r\n        'wall_corner_front_left': [32, 160, 16, 16],\r\n        'wall_corner_front_right': [48, 160, 16, 16],\r\n        'wall_inner_corner_l_top_left': [80, 128, 16, 16],\r\n        'wall_inner_corner_l_top_right': [64, 128, 16, 16],\r\n        'wall_inner_corner_mid_left': [80, 144, 16, 16],\r\n        'wall_inner_corner_mid_right': [64, 144, 16, 16],\r\n        'wall_inner_corner_t_top_left': [80, 160, 16, 16],\r\n        'wall_inner_corner_t_top_right': [64, 160, 16, 16],\r\n        'crate': [288, 298, 16, 22],\r\n        'column_top': [80, 80, 16, 16],\r\n        'column_mid': [80, 96, 16, 16],\r\n        'column_base': [80, 112, 16, 16],\r\n    },\r\n    'wall_anim': {\r\n        'wall_fountain_mid_red': [64, 16, 16, 16],\r\n        'wall_fountain_basin_red': [64, 32, 16, 16],\r\n        'wall_fountain_mid_blue': [64, 48, 16, 16],\r\n        'wall_fountain_basin_blue': [64, 64, 16, 16],\r\n    },\r\n    'floor': {\r\n        'floor_1': [16, 64, 16, 16],\r\n        'floor_2': [32, 64, 16, 16],\r\n        'floor_3': [48, 64, 16, 16],\r\n        'floor_4': [16, 80, 16, 16],\r\n        'floor_5': [32, 80, 16, 16],\r\n        'floor_6': [48, 80, 16, 16],\r\n        'floor_7': [16, 96, 16, 16],\r\n        'floor_8': [32, 96, 16, 16],\r\n        'wall_goo_base': [64, 96, 16, 16],\r\n        'skull': [288, 320, 16, 16],\r\n    },\r\n    'interactable': {\r\n        'floor_ladder': [48, 96, 16, 16],\r\n        'hole': [96, 144, 16, 16],\r\n        'edge': [96, 128, 16, 16],\r\n    },\r\n    'interactable_anim': {\r\n        'spikes': [16, 176, 16, 16],\r\n        'switch_red': [16, 192, 16, 16],\r\n        'switch_blue': [48, 192, 16, 16],\r\n        'lever': [80, 192, 16, 16],\r\n        'chest_empty': [320, 288, 16, 16],\r\n        'chest_full': [320, 304, 16, 16],\r\n        'chest_mimic': [320, 320, 16, 16],\r\n        'coin': [288, 272, 8, 8],\r\n    },\r\n    'doors': {\r\n        'doors_all': [16, 221, 64, 35],\r\n        'doors_frame_left': [16, 224, 16, 32],\r\n        'doors_frame_top': [32, 221, 32, 3],\r\n        'doors_frame_right:': [63, 224, 16, 32],\r\n        'doors_leaf_closed': [32, 224, 32, 32],\r\n        'doors_leaf_open': [80, 224, 32, 32],\r\n    },\r\n    'weapon': {\r\n        'weapon_knife': [293, 18, 6, 13],\r\n        'weapon_rusty_sword': [307, 26, 10, 21],\r\n        'weapon_regular_sword': [323, 26, 10, 21],\r\n        'weapon_red_gem_sword': [339, 26, 10, 21],\r\n        'weapon_big_hammer': [291, 42, 10, 37],\r\n        'weapon_hammer': [307, 55, 10, 24],\r\n        'weapon_baton_with_spikes': [323, 57, 10, 22],\r\n        'weapon_mace': [339, 55, 10, 24],\r\n        'weapon_katana': [293, 82, 6, 29],\r\n        'weapon_saw_sword': [307, 86, 10, 25],\r\n        'weapon_anime_sword': [322, 81, 12, 30],\r\n        'weapon_axe': [341, 90, 9, 21],\r\n        'weapon_machete': [294, 121, 5, 22],\r\n        'weapon_cleaver': [310, 124, 8, 19],\r\n        'weapon_duel_sword': [325, 113, 9, 30],\r\n        'weapon_knight_sword': [339, 114, 10, 29],\r\n        'weapon_golden_sword': [291, 153, 10, 22],\r\n        'weapon_lavish_sword': [307, 145, 10, 30],\r\n        'weapon_red_magic_staff': [324, 145, 8, 30],\r\n        'weapon_green_magic_staff': [340, 145, 8, 30],\r\n        'weapon_spear': [293, 177, 6, 30],\r\n    },\r\n    'potion': {\r\n        'flask_big_red': [288, 224, 16, 16],\r\n        'flask_big_blue': [304, 224, 16, 16],\r\n        'flask_big_green': [320, 224, 16, 16],\r\n        'flask_big_yellow': [336, 224, 16, 16],\r\n        'flask_red': [288, 240, 16, 16],\r\n        'flask_blue': [304, 240, 16, 16],\r\n        'flask_green': [320, 240, 16, 16],\r\n        'flask_yellow': [336, 240, 16, 16],\r\n    },\r\n    'enemy': {\r\n        'tiny_zombie': [368, 16, 16, 16],\r\n        'goblin': [368, 32, 16, 16],\r\n        'imp': [368, 48, 16, 16],\r\n        'skelet': [368, 80, 16, 16],\r\n        'muddy': [368, 112, 16, 16],\r\n        'swampy': [432, 112, 16, 16],\r\n        'zombie': [368, 144, 16, 16],\r\n        'ice_zombie': [432, 144, 16, 16],\r\n        'masked_orc': [368, 172, 16, 20],\r\n        'orc_warrior': [368, 204, 16, 20],\r\n        'orc_shaman': [368, 236, 16, 20],\r\n        'necromancer': [368, 268, 16, 20],\r\n        'wogol': [368, 300, 16, 20],\r\n        'chort': [368, 328, 16, 24],\r\n        'big_zombie': [16, 270, 32, 34],\r\n        'ogre': [16, 320, 32, 32],\r\n        'big_demon': [16, 364, 32, 36],\r\n    },\r\n    'player': [128, 228, 16, 28]\r\n};\r\n","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst game_1 = __importDefault(require(\"./game/game\"));\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n    var _a, _b, _c, _d;\r\n    const mapWidth = window.localStorage.getItem('mapWidth');\r\n    const mapHeight = window.localStorage.getItem('mapHeight');\r\n    const elements = window.localStorage.getItem('elements');\r\n    const chooseResolution = document.getElementById('chooseResolution');\r\n    const unsavedData = document.getElementById('unsavedData');\r\n    const divCanvas = document.getElementById('divCanvas');\r\n    const btnCredits = document.getElementById('btnCredits');\r\n    const btnSaveMap = document.getElementById('btnSaveMap');\r\n    if (mapWidth && mapHeight && elements) {\r\n        unsavedData.style.display = 'block';\r\n    }\r\n    else {\r\n        chooseResolution.style.display = 'block';\r\n    }\r\n    (_a = document.getElementById('btnUnsavedDataYes')) === null || _a === void 0 ? void 0 : _a.addEventListener('click', () => {\r\n        btnCredits.style.display = 'block';\r\n        btnSaveMap.style.display = 'block';\r\n        unsavedData.style.display = 'none';\r\n        divCanvas.style.display = 'flex';\r\n        new game_1.default(parseInt(mapWidth), parseInt(mapHeight), elements).main();\r\n    });\r\n    (_b = document.getElementById('btnUnsavedDataNo')) === null || _b === void 0 ? void 0 : _b.addEventListener('click', () => {\r\n        unsavedData.style.display = 'none';\r\n        chooseResolution.style.display = 'block';\r\n    });\r\n    (_c = document.getElementById('btnCreateMap')) === null || _c === void 0 ? void 0 : _c.addEventListener('click', () => {\r\n        const inputWidth = document.getElementById('width');\r\n        const inputHeight = document.getElementById('height');\r\n        const width = parseInt(inputWidth.value);\r\n        const height = parseInt(inputHeight.value);\r\n        if (width && height) {\r\n            btnCredits.style.display = 'block';\r\n            btnSaveMap.style.display = 'block';\r\n            chooseResolution.style.display = 'none';\r\n            divCanvas.style.display = 'flex';\r\n            new game_1.default(width, height).main();\r\n        }\r\n    });\r\n    (_d = document.getElementById('btnLoadMap')) === null || _d === void 0 ? void 0 : _d.addEventListener('click', () => {\r\n        const inputJSON = document.getElementById('inputJSON');\r\n        inputJSON.addEventListener('change', function () {\r\n            if (this.files) {\r\n                if (this.files[0].type === \"application/json\") {\r\n                    const fr = new FileReader();\r\n                    fr.addEventListener('load', (e) => {\r\n                        if (e.target) {\r\n                            const mapJSONString = e.target.result;\r\n                            const mapJSON = JSON.parse(mapJSONString);\r\n                            const width = parseInt(mapJSON.width);\r\n                            const height = parseInt(mapJSON.height);\r\n                            const elements = JSON.stringify(mapJSON.elements);\r\n                            btnCredits.style.display = 'block';\r\n                            btnSaveMap.style.display = 'block';\r\n                            chooseResolution.style.display = 'none';\r\n                            divCanvas.style.display = 'flex';\r\n                            new game_1.default(width, height, elements).main();\r\n                        }\r\n                    });\r\n                    fr.readAsText(this.files[0]);\r\n                }\r\n            }\r\n        });\r\n        inputJSON.click();\r\n    });\r\n});\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GameState = exports.TILE_SIZE = exports.SPRITESHEET = exports.GAME_HEIGHT = exports.GAME_WIDTH = void 0;\r\nexports.GAME_WIDTH = 320;\r\nexports.GAME_HEIGHT = 180;\r\nexports.SPRITESHEET = './assets/img/spritesheet.png';\r\nexports.TILE_SIZE = 16;\r\nvar GameState;\r\n(function (GameState) {\r\n    GameState[GameState[\"INITIALIZING\"] = 0] = \"INITIALIZING\";\r\n    GameState[GameState[\"MAINMENU\"] = 1] = \"MAINMENU\";\r\n    GameState[GameState[\"PLAY\"] = 2] = \"PLAY\";\r\n    GameState[GameState[\"CUTSCENE\"] = 3] = \"CUTSCENE\";\r\n    GameState[GameState[\"PAUSEMENU\"] = 4] = \"PAUSEMENU\";\r\n    GameState[GameState[\"ENDING\"] = 5] = \"ENDING\";\r\n})(GameState = exports.GameState || (exports.GameState = {}));\r\n;\r\n","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst graphics_1 = __importDefault(require(\"../graphics/graphics\"));\r\nconst game_1 = __importDefault(require(\"../game/game\"));\r\nclass HTML {\r\n    constructor(scale) {\r\n        this.spanFPS = document.getElementById('fpsCounter');\r\n        this.btnCredits = document.getElementById('btnCredits');\r\n        this.modalCredits = document.getElementById('modalCredits');\r\n        this.btnToggleFPS = document.getElementById('toggleFPS');\r\n        this.elements = document.getElementById('elements');\r\n        this.scale = scale;\r\n        this.spanFPS.style.display = 'none';\r\n        this.modalCredits.style.display = 'none';\r\n        this.initializeEvents();\r\n    }\r\n    initializeEvents() {\r\n        this.btnCredits.addEventListener('click', () => {\r\n            if (this.modalCredits.style.display === 'none') {\r\n                this.modalCredits.style.display = 'block';\r\n            }\r\n            else {\r\n                this.modalCredits.style.display = 'none';\r\n            }\r\n        });\r\n        this.btnToggleFPS.addEventListener('click', () => {\r\n            if (this.spanFPS.style.display === 'block') {\r\n                this.spanFPS.style.display = 'none';\r\n            }\r\n            else {\r\n                this.spanFPS.style.display = 'block';\r\n            }\r\n        });\r\n    }\r\n    createElements() {\r\n        const divBreakWallBefore = document.createElement('div');\r\n        divBreakWallBefore.className = 'break';\r\n        const spanWall = document.createElement('span');\r\n        spanWall.innerHTML = 'Wall:';\r\n        const divBreakWallAfter = document.createElement('div');\r\n        divBreakWallAfter.className = 'break';\r\n        this.elements.append(divBreakWallBefore);\r\n        this.elements.append(spanWall);\r\n        this.elements.append(divBreakWallAfter);\r\n        graphics_1.default.wall.forEach((sprite, index) => {\r\n            this.appendElements(sprite, index, 'wall');\r\n        });\r\n        const divBreakWallAnimBefore = document.createElement('div');\r\n        divBreakWallAnimBefore.className = 'break';\r\n        const spanWallAnim = document.createElement('span');\r\n        spanWallAnim.innerHTML = 'WallAnim:';\r\n        const divBreakWallAnimAfter = document.createElement('div');\r\n        divBreakWallAnimAfter.className = 'break';\r\n        this.elements.append(divBreakWallAnimBefore);\r\n        this.elements.append(spanWallAnim);\r\n        this.elements.append(divBreakWallAnimAfter);\r\n        graphics_1.default.wallAnim.forEach((sprite, index) => {\r\n            this.appendElements(sprite, index, 'wallAnim');\r\n        });\r\n        const divBreakFloorBefore = document.createElement('div');\r\n        divBreakFloorBefore.className = 'break';\r\n        const spanFloor = document.createElement('span');\r\n        spanFloor.innerHTML = 'Floor:';\r\n        const divBreakFloorAfter = document.createElement('div');\r\n        divBreakFloorAfter.className = 'break';\r\n        this.elements.append(divBreakFloorBefore);\r\n        this.elements.append(spanFloor);\r\n        this.elements.append(divBreakFloorAfter);\r\n        graphics_1.default.floor.forEach((sprite, index) => {\r\n            this.appendElements(sprite, index, 'floor');\r\n        });\r\n        const divBreakInteractableBefore = document.createElement('div');\r\n        divBreakInteractableBefore.className = 'break';\r\n        const spanInteractable = document.createElement('span');\r\n        spanInteractable.innerHTML = 'Interactable:';\r\n        const divBreakInteractableAfter = document.createElement('div');\r\n        divBreakInteractableAfter.className = 'break';\r\n        this.elements.append(divBreakInteractableBefore);\r\n        this.elements.append(spanInteractable);\r\n        this.elements.append(divBreakInteractableAfter);\r\n        graphics_1.default.interactable.forEach((sprite, index) => {\r\n            this.appendElements(sprite, index, 'interactable');\r\n        });\r\n        const divBreakInteractableAnimBefore = document.createElement('div');\r\n        divBreakInteractableAnimBefore.className = 'break';\r\n        const spanInteractableAnim = document.createElement('span');\r\n        spanInteractableAnim.innerHTML = 'InteractableAnim:';\r\n        const divBreakInteractableAnimAfter = document.createElement('div');\r\n        divBreakInteractableAnimAfter.className = 'break';\r\n        this.elements.append(divBreakInteractableAnimBefore);\r\n        this.elements.append(spanInteractableAnim);\r\n        this.elements.append(divBreakInteractableAnimAfter);\r\n        graphics_1.default.interactableAnim.forEach((sprite, index) => {\r\n            this.appendElements(sprite, index, 'interactableAnim');\r\n        });\r\n        const divBreakDoorsBefore = document.createElement('div');\r\n        divBreakDoorsBefore.className = 'break';\r\n        const spanDoors = document.createElement('span');\r\n        spanDoors.innerHTML = 'Doors:';\r\n        const divBreakDoorsAfter = document.createElement('div');\r\n        divBreakDoorsAfter.className = 'break';\r\n        this.elements.append(divBreakDoorsBefore);\r\n        this.elements.append(spanDoors);\r\n        this.elements.append(divBreakDoorsAfter);\r\n        graphics_1.default.doors.forEach((sprite, index) => {\r\n            this.appendElements(sprite, index, 'doors');\r\n        });\r\n        const divBreakWeaponBefore = document.createElement('div');\r\n        divBreakWeaponBefore.className = 'break';\r\n        const spanWeapon = document.createElement('span');\r\n        spanWeapon.innerHTML = 'Weapon:';\r\n        const divBreakWeaponAfter = document.createElement('div');\r\n        divBreakWeaponAfter.className = 'break';\r\n        this.elements.append(divBreakWeaponBefore);\r\n        this.elements.append(spanWeapon);\r\n        this.elements.append(divBreakWeaponAfter);\r\n        graphics_1.default.weapon.forEach((sprite, index) => {\r\n            this.appendElements(sprite, index, 'weapon');\r\n        });\r\n        const divBreakPotionBefore = document.createElement('div');\r\n        divBreakPotionBefore.className = 'break';\r\n        const spanPotion = document.createElement('span');\r\n        spanPotion.innerHTML = 'Potion:';\r\n        const divBreakPotionAfter = document.createElement('div');\r\n        divBreakPotionAfter.className = 'break';\r\n        this.elements.append(divBreakPotionBefore);\r\n        this.elements.append(spanPotion);\r\n        this.elements.append(divBreakPotionAfter);\r\n        graphics_1.default.potion.forEach((sprite, index) => {\r\n            this.appendElements(sprite, index, 'potion');\r\n        });\r\n        const divBreakEnemyBefore = document.createElement('div');\r\n        divBreakEnemyBefore.className = 'break';\r\n        const spanEnemy = document.createElement('span');\r\n        spanEnemy.innerHTML = 'Enemy:';\r\n        const divBreakEnemyAfter = document.createElement('div');\r\n        divBreakEnemyAfter.className = 'break';\r\n        this.elements.append(divBreakEnemyBefore);\r\n        this.elements.append(spanEnemy);\r\n        this.elements.append(divBreakEnemyAfter);\r\n        graphics_1.default.enemy.forEach((sprite, index) => {\r\n            this.appendElements(sprite, index, 'enemy');\r\n        });\r\n        const divBreakPlayerBefore = document.createElement('div');\r\n        divBreakPlayerBefore.className = 'break';\r\n        const spanPlayer = document.createElement('span');\r\n        spanPlayer.innerHTML = 'Player:';\r\n        const divBreakPlayerAfter = document.createElement('div');\r\n        divBreakPlayerAfter.className = 'break';\r\n        this.elements.append(divBreakPlayerBefore);\r\n        this.elements.append(spanPlayer);\r\n        this.elements.append(divBreakPlayerAfter);\r\n        this.appendElements(graphics_1.default.player, 0, 'player');\r\n    }\r\n    appendElements(sprite, index, array) {\r\n        const canvas = document.createElement('canvas');\r\n        canvas.draggable = true;\r\n        canvas.width = sprite.sprite.width * this.scale;\r\n        canvas.height = sprite.sprite.height * this.scale;\r\n        canvas.style.margin = '5px';\r\n        canvas.title = sprite.name;\r\n        canvas.id = sprite.name;\r\n        canvas.dataset.index = '' + index;\r\n        canvas.dataset.array = array;\r\n        canvas.addEventListener('dragstart', (e) => {\r\n            game_1.default.dragged = canvas;\r\n            game_1.default.dragEvent = e;\r\n        });\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.scale(this.scale, this.scale);\r\n        ctx.imageSmoothingEnabled = false;\r\n        ctx.drawImage(sprite.sprite, 0, 0);\r\n        this.elements.append(canvas);\r\n    }\r\n}\r\nexports.default = HTML;\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./assets/ts/main.ts\");\n"],"sourceRoot":""}